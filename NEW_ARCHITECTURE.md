# KFChess - New Clean Architecture

## ΧΧ¨Χ›Χ™ΧΧ§ΧΧ•Χ¨Χ” ΧΧ™Χ Χ™ΧΧΧ™Χ Χ•Χ‘Χ¨Χ•Χ¨Χ”

### π― ΧΆΧ™Χ§Χ¨Χ•Χ Χ”ΧΧ—Χ•ΧΧ§

**ΧΧ§Χ•Χ— (Client):**
- ΧΧ—Χ¨ΧΧ™ Χ¨Χ§ ΧΆΧ Χ’Χ¨Χ¤Χ™Χ§Χ” Χ•ΧΧ¦Χ•Χ’Χ”
- Χ§Χ•ΧΧ Χ§ΧΧ ΧΧ§ΧΧ“Χ
- ΧΧ¦Χ™Χ’ ΧΧ•Χ¦ΧΧ•Χ

**Χ©Χ¨Χ (Server):**  
- ΧΧ—Χ¨ΧΧ™ Χ¨Χ§ ΧΆΧ ΧΧ•Χ’Χ™Χ§Χ” Χ•Χ‘Χ“Χ™Χ§Χ Χ—Χ•Χ§Χ™Χ•Χ
- ΧΧ™Χ Χ’Χ¨Χ¤Χ™Χ§Χ” Χ‘Χ©Χ¨Χ!
- ΧΧ™Χ GUI Χ‘Χ©Χ¨Χ!

### π”„ Χ–Χ¨Χ™ΧΧ Χ”Χ¤Χ§Χ•Χ“Χ•Χ Χ”Χ—Χ“Χ©Χ”

```
[Keyboard Input] 
       β†“
[Queue: Keyboard Input] 
       β†“  
[Thread: Send to Server]
       β†“
[Server Validates] 
       β†“
[Broadcast to All Clients]
       β†“
[Queue: Commands from Server]
       β†“
[Game Loop Execution]
```

### π“ ΧΧ‘Χ Χ” Χ”Χ§Χ‘Χ¦Χ™Χ

#### Client Side
- `ClientGame.java` - ΧΧ Χ”Χ ΧΧ Χ©Χ Χ™ Χ”ΧΧ•Χ¨Χ™Χ Χ•Χ”ΧΧ”ΧΧ™Χ›Χ•Χ Χ™Χ
- `ChessClient.java` - ΧΧ§Χ©Χ•Χ¨Χ ΧΆΧ Χ”Χ©Χ¨Χ

#### Server Side  
- `ChessServer.java` - ΧΧ Χ”Χ Χ—Χ™Χ‘Χ•Χ¨Χ™Χ Χ•socket ΧΧ§Χ©Χ•Χ¨Χ
- `ServerChessLogic.java` - ΧΧ•Χ’Χ™Χ§Χ” ΧΧ™Χ Χ™ΧΧΧ™Χ Χ‘ΧΧ‘Χ“ (ΧΧΧ Χ’Χ¨Χ¤Χ™Χ§Χ”!)

### π§µ Threading Architecture

#### Client Threads:
1. **Main Thread** - Game loop + GUI
2. **Server Sender Thread** - Χ§Χ•Χ¨ΧΧ ΧΧΧ•Χ¨ Χ”Χ§ΧΧ“Χ Χ•Χ©Χ•ΧΧ—Χ ΧΧ©Χ¨Χ  
3. **Command Processor Thread** - Χ§Χ•Χ¨ΧΧ Χ¤Χ§Χ•Χ“Χ•Χ ΧΧΧ•Χ©Χ¨Χ•Χ ΧΧ”Χ©Χ¨Χ Χ•ΧΧ‘Χ¦ΧΆΧ Χ‘ΧΧ©Χ—Χ§

#### Server Threads:
1. **Main Thread** - ΧΧ§Χ‘Χ Χ—Χ™Χ‘Χ•Χ¨Χ™Χ
2. **Client Handler Threads** - ΧΧ—Χ“ ΧΧ›Χ ΧΧ§Χ•Χ—, ΧΧΆΧ‘Χ“ Χ¤Χ§Χ•Χ“Χ•Χ

### π” Debug Output

Χ”ΧΧ¨Χ›Χ™ΧΧ§ΧΧ•Χ¨Χ” Χ›Χ•ΧΧΧ Χ”Χ“Χ¤Χ΅Χ•Χ debugging Χ‘Χ¨Χ•Χ¨Χ•Χ:

- `β“ [KEYBOARD β†’ QUEUE]` - Χ¤Χ§Χ•Χ“Χ” Χ Χ›Χ Χ΅Χ ΧΧΧ•Χ¨ Χ”Χ§ΧΧ“Χ
- `β“ [QUEUE β†’ SERVER]` - Χ¤Χ§Χ•Χ“Χ” Χ Χ©ΧΧ—Χ ΧΧ©Χ¨Χ  
- `π” [SERVER VALIDATION]` - Χ©Χ¨Χ Χ‘Χ•Χ“Χ§ Χ—Χ•Χ§Χ™Χ•Χ
- `β“ [VALIDATION PASSED]` - Χ¤Χ§Χ•Χ“Χ” ΧΆΧ‘Χ¨Χ” ΧΧ™ΧΧ•Χ
- `β“ [SERVER BROADCAST]` - Χ©Χ¨Χ ΧΧ©Χ“Χ¨ ΧΧ›Χ Χ”ΧΧ§Χ•Χ—Χ•Χ
- `β“ [SERVER β†’ GAME]` - Χ¤Χ§Χ•Χ“Χ” ΧΧΧ‘Χ¦ΧΆΧ Χ‘ΧΧ©Χ—Χ§

### π’΅ Χ™ΧΧ¨Χ•Χ Χ•Χ Χ”ΧΧ¨Χ›Χ™ΧΧ§ΧΧ•Χ¨Χ” Χ”Χ—Χ“Χ©Χ”

1. **Χ”Χ¤Χ¨Χ“Χ” Χ‘Χ¨Χ•Χ¨Χ”** - ΧΧ§Χ•Χ— = Χ’Χ¨Χ¤Χ™Χ§Χ”, Χ©Χ¨Χ = ΧΧ•Χ’Χ™Χ§Χ”
2. **Χ‘Χ™Χ¦Χ•ΧΆΧ™Χ ΧΧ•Χ‘Χ™Χ** - Χ”Χ©Χ¨Χ ΧΧ ΧΧ•ΧΆΧ Χ’Χ¨Χ¤Χ™Χ§Χ” ΧΧ™Χ•ΧΧ¨Χ  
3. **ΧΧΧ™Χ Χ•Χ** - Χ›Χ Χ¤Χ§Χ•Χ“Χ” ΧΆΧ•Χ‘Χ¨Χ Χ“Χ¨Χ Χ”Χ©Χ¨Χ
4. **Χ΅Χ™Χ Χ›Χ¨Χ•Χ** - Χ›Χ Χ”Χ©Χ—Χ§Χ Χ™Χ Χ¨Χ•ΧΧ™Χ Χ‘Χ“Χ™Χ•Χ§ ΧΧ ΧΧ•ΧΧ• Χ“Χ‘Χ¨
5. **Χ”Χ¨Χ—Χ‘Χ” Χ§ΧΧ”** - Χ§Χ ΧΧ”Χ•Χ΅Χ™Χ£ Χ©Χ—Χ§Χ Χ™Χ ΧΧ• features

### π« ΧΧ” Χ”Χ©Χ¨Χ ΧΧ Χ¦Χ¨Χ™Χ Χ™Χ•ΧΧ¨

- β `GraphicsFactory` - ΧΧ™Χ Χ’Χ¨Χ¤Χ™Χ§Χ” Χ‘Χ©Χ¨Χ
- β `PhysicsFactory` - ΧΧ™Χ ΧΧ Χ™ΧΧ¦Χ™Χ•Χ Χ‘Χ©Χ¨Χ  
- β `Game` class ΧΧΧ - Χ¨Χ§ ΧΧ•Χ’Χ™Χ§Χ” Χ‘Χ΅Χ™Χ΅Χ™Χ
- β GUI components - Χ”Χ©Χ¨Χ headless

### β… ΧΧ” Χ”Χ©Χ¨Χ Χ›Χ Χ¦Χ¨Χ™Χ

- β… `Command` parsing - Χ”Χ‘Χ Χ Χ¤Χ§Χ•Χ“Χ•Χ
- β… Board state - ΧΧ¦Χ‘ Χ”ΧΧ•Χ— Χ”Χ Χ•Χ›Χ—Χ™  
- β… Rules validation - Χ‘Χ“Χ™Χ§Χ Χ—Χ•Χ§Χ™Χ•Χ ΧΧ”ΧΧ›Χ™Χ
- β… Broadcasting - Χ©Χ™Χ“Χ•Χ¨ ΧΧ›Χ Χ”ΧΧ§Χ•Χ—Χ•Χ

## Χ”Χ¨Χ¦Χ”

1. Χ”Χ¤ΧΆΧ Χ©Χ¨Χ: `mvn -f chess-server/pom.xml exec:java`
2. Χ”Χ¤ΧΆΧ ΧΧ§Χ•Χ— 1: `mvn -f chess-client/pom.xml exec:java`  
3. Χ”Χ¤ΧΆΧ ΧΧ§Χ•Χ— 2: `mvn -f chess-client/pom.xml exec:java`

Χ”ΧΧ©Χ—Χ§ Χ™ΧΧ—Χ™Χ Χ¨Χ§ Χ›ΧΧ©Χ¨ Χ©Χ Χ™ Χ©Χ—Χ§Χ Χ™Χ ΧΧ—Χ•Χ‘Χ¨Χ™Χ.
